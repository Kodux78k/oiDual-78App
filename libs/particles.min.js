/*!
 * particles.min.js - minimal stub for offline/testing
 * Provides particlesJS(containerId, config) without heavy implementation.
 */
(function(window){
  function createCanvas(containerId){
    var container = document.getElementById(containerId);
    if(!container) {
      console.warn('particles.js stub: container not found:', containerId);
      return null;
    }
    var c = container.querySelector('canvas.particles-js-canvas-el');
    if(!c){
      c = document.createElement('canvas');
      c.className = 'particles-js-canvas-el';
      c.style.width = '100%';
      c.style.height = '100%';
      c.style.position = 'absolute';
      c.style.left = '0';
      c.style.top = '0';
      container.appendChild(c);
    }
    // set size to container rect
    var r = container.getBoundingClientRect();
    c.width = Math.max(1, Math.floor(r.width));
    c.height = Math.max(1, Math.floor(r.height));
    return c;
  }

  function particlesJS(containerId, config){
    // lightweight: create canvas and draw 1 subtle dot to avoid errors
    try {
      var cv = createCanvas(containerId);
      if(!cv) return;
      var ctx = cv.getContext('2d');
      ctx.clearRect(0,0,cv.width,cv.height);
      ctx.globalAlpha = 0.05;
      ctx.fillStyle = '#0ff';
      ctx.beginPath();
      ctx.arc(cv.width/2, cv.height/2, 2, 0, Math.PI*2);
      ctx.fill();
      // simple animation loop (low cost)
      var rafId;
      function loop(){
        // gentle pulsate
        ctx.clearRect(0,0,cv.width,cv.height);
        ctx.globalAlpha = 0.03;
        ctx.fillStyle = '#0ff';
        var t = Date.now() / 1000;
        var r = 2 + Math.abs(Math.sin(t)) * 3;
        ctx.beginPath();
        ctx.arc(cv.width/2 + Math.sin(t*0.3)*20, cv.height/2 + Math.cos(t*0.25)*10, r, 0, Math.PI*2);
        ctx.fill();
        rafId = requestAnimationFrame(loop);
      }
      rafId = requestAnimationFrame(loop);
      // expose a destroy method
      return { pJS: { canvas: cv }, destroy: function(){ cancelAnimationFrame(rafId); try{ cv.remove(); }catch(e){} } };
    } catch(e){ console.warn('particles.js stub error', e); }
  }

  // also provide a fallback alias
  window.particlesJS = particlesJS;
  window.pJSDom = [{ pJS: { canvas: null } }];
})(window);
